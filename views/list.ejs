<!doctype html>
<!-- views/list.ejs - Display a table of books fetched from the database
	 Variables provided by router:
	   - availableBooks : array of book rows (each row has `name` and `price`)
	   - shopData.shopName : application shop name
-->
<html>
	<head>
		<title>Here are the books that we sell: - <%= shopData.shopName %></title>
		<link rel="stylesheet"  type="text/css" href="/main.css" />
		<style>
			table.books-list { border-collapse: collapse; width: 80%; max-width: 800px; }
			table.books-list th, table.books-list td { border: 1px solid #ddd; padding: 8px; }
			table.books-list th { background: #f7f7f7; text-align: left; }
			.price { text-align: right; }
		</style>
	</head>
	<body>
		<h1><%= shopData.shopName %></h1>
		<h2>Available Books</h2>

		<% if (availableBooks && availableBooks.length) { %>
			<table class="books-list">
				<thead>
					<tr>
						<th>Title</th>
						<th class="price">Price</th>
					</tr>
				</thead>
				<tbody>
					<% availableBooks.forEach(function(book){ %>
						<tr>
							<td><%= book.name %></td>
							<td class="price">Â£<%= (typeof book.price === 'number') ? book.price.toFixed(2) : book.price %></td>
						</tr>
					<% }) %>
				</tbody>
			</table>
		<% } else { %>
			<p>No books available at the moment.</p>
		<% } %>

		<p><a href="/">Home</a> | <a href="/books/search">Search</a></p>
	</body>
</html>

